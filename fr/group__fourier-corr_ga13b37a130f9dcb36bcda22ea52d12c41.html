<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libtsd: tsd::fourier::détecteur_création</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libtsd
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">Librairie C++ pour le traitement du signal</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Généré par Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Recherche','.html');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Page&#160;principale</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="pageinstall.html"><span>Installation</span></a></li>
      <li><a href="pagelicence.html"><span>Licence</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Recherche" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__fourier-corr_ga13b37a130f9dcb36bcda22ea52d12c41.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="contents">
<a id="ga13b37a130f9dcb36bcda22ea52d12c41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga13b37a130f9dcb36bcda22ea52d12c41">&#9670;&nbsp;</a></span>détecteur_création()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__tsd.html#ga9e2377b654c93e22d894bcdcae510500">sptr</a>&lt;<a class="el" href="structtsd_1_1fourier_1_1_detecteur.html">Detecteur</a>&gt; tsd::fourier::détecteur_création </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtsd_1_1fourier_1_1_detecteur_config.html">DetecteurConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em> = <code><a class="el" href="structtsd_1_1fourier_1_1_detecteur_config.html">DetecteurConfig</a>()</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<h3>Détecteur par corrélation</h3>
<p>Cette fonction calcule, au fil de l'eau, la corrélation normalisée entre un signal \((x_k)\) reçu en continu et un motif fixe \((h_k)\) de dimension \(M\) : </p><p class="formulaDsp">
\[ y_n = \frac{\left|\displaystyle{\sum_{k=0}^{M-1} x_{n+k-(M-1)} \cdot h_{k}^\star}\right|}{\displaystyle{ \sqrt{\left(\sum_{k=0}^{M-1}\left|x_{n+k-(M-1)}\right|^2\right) \left(\sum_{k=0}^{M-1}\left|h_k\right|^2\right)}}} \]
</p>
<p>Les \(y_n\) sont donc compris entre 0 et 1, et seront égaux à 1 uniquement si le signal est exactement égal au motif (à un facteur d'échelle constant près) sur l'intervalle \([n-M+1\dots n]\).</p>
<p>Le calcul étant fait de manière efficace dans le domaine fréquentiel via la technique Overlap-And-Add (voir <a class="el" href="group__fourier_ga0c01b0b59ae01c0957cfe30a3b92cb5b.html#ga0c01b0b59ae01c0957cfe30a3b92cb5b">filtre_fft()</a>), la complexité est de l'ordre de \(\log_2 M\) opérations par échantillon (si \(M\) est une puissance de 2).</p>
<p>Ce filtre peut-être utilisé de deux manières :</p><ul>
<li>Tout d'abord, c'est un filtre qui renvoie, au fil de l'eau, les valeurs de corrélation (signal vert dans l'exemple ci-dessous),</li>
<li>Pour une utilisation plus simple, une callback utilisateur peut être appelée dès lors que la corrélation dépasse un certain seuil paramétrable. En paramètre de cette callback, est indiquée la position du motif détecté, ainsi que diverses informations (voir la structure <a class="el" href="structtsd_1_1fourier_1_1_detecteur_config_1_1_detection.html">DetecteurConfig::Detection</a>) :<ul>
<li>Valeur de la corrélation normalisée</li>
<li>Gain réel du signal (rapport d'amplitude entre le signal reçu et le motif théorique attendu)</li>
<li>Déphasage du signal reçu</li>
<li>Ecart-type du bruit</li>
<li>SNR estimé</li>
</ul>
</li>
</ul>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>Structure de configuration </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Renvoie</dt><dd><a class="el" href="structtsd_1_1_filtre.html" title="Structure abstraite pour un filtre de données configurable.">Filtre</a> cfloat \(\to\) float, qui prend en entrée des échantillons, et sort, au fil de l'eau, la corrélation normalisée avec le motif.</dd></dl>
<dl class="section user"><dt>Exemple</dt><dd><div class="fragment"><div class="line">  <span class="keywordtype">int</span> M = 512; <span class="comment">// Dimension du motif</span></div>
<div class="line">  <span class="keywordtype">int</span> N = 16*M; <span class="comment">// Dimension du signal</span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Motif de synchronisation</span></div>
<div class="line">  ArrayXcf motif = <a class="code" href="group__tsd-gen_gae9fae5f674602bd178ea4a81a1c08d2b.html#gae9fae5f674602bd178ea4a81a1c08d2b">sigchirp2</a>(0.001, 0.2, M);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Signal = bruit</span></div>
<div class="line">  ArrayXcf x = 0.1 * <a class="code" href="group__tsd-gen_ga4ec36c6d71e373aa785a7542a3673928.html#ga4ec36c6d71e373aa785a7542a3673928">randn</a>(N);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// + motif à détecter au milieu</span></div>
<div class="line">  x.segment(900, M) = motif;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">int</span> pos_detection = 0;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  <span class="comment">//float C;</span></div>
<div class="line">  <span class="comment">//int Nf, Nz, Ne;</span></div>
<div class="line">  <span class="comment">//ola_complexite_optimise(M, C, Nf, Nz, Ne);</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  DetecteurConfig config;</div>
<div class="line">  config.motif  = motif;</div>
<div class="line">  config.Ne     = M;</div>
<div class="line">  config.gere_detection = [&amp;](<span class="keyword">const</span> DetecteurConfig::Detection &amp;det)</div>
<div class="line">  {</div>
<div class="line">    msg(<span class="stringliteral">&quot;Detection : {}.&quot;</span>, det);</div>
<div class="line">    pos_detection = det.position;</div>
<div class="line">  };</div>
<div class="line">  <span class="keyword">auto</span> det = <a class="code" href="group__fourier-corr_ga13b37a130f9dcb36bcda22ea52d12c41.html#ga13b37a130f9dcb36bcda22ea52d12c41">détecteur_création</a>(config);</div>
<div class="line">  ArrayXf y = det-&gt;step(x);</div>
<div class="line"> </div>
<div class="line">  Figures f;</div>
<div class="line">  f.subplot().plot(motif.real(), <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;Motif à détecter&quot;</span>);</div>
<div class="line">  f.subplot().plot(x.real(), <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;x&quot;</span>);</div>
<div class="line">  f.gcf().def_rdi({0, -1, 8000, 2});</div>
<div class="line"> </div>
<div class="line">  f.gcf().canva().set_couleur(tsd::vue::Couleur::Vert);</div>
<div class="line">  f.gcf().canva().set_epaisseur(3);</div>
<div class="line">  f.gcf().canva().set_remplissage(<span class="keyword">false</span>);</div>
<div class="line">  f.gcf().canva().rectangle(pos_detection, 1, pos_detection + M - 1, -1);</div>
<div class="line"> </div>
<div class="ttc" id="agroup__fourier-corr_ga13b37a130f9dcb36bcda22ea52d12c41_html_ga13b37a130f9dcb36bcda22ea52d12c41"><div class="ttname"><a href="group__fourier-corr_ga13b37a130f9dcb36bcda22ea52d12c41.html#ga13b37a130f9dcb36bcda22ea52d12c41">tsd::fourier::détecteur_création</a></div><div class="ttdeci">sptr&lt; Detecteur &gt; détecteur_création(const DetecteurConfig &amp;config=DetecteurConfig())</div><div class="ttdoc">Détecteur par corrélation.</div></div>
<div class="ttc" id="agroup__tsd-gen_ga4ec36c6d71e373aa785a7542a3673928_html_ga4ec36c6d71e373aa785a7542a3673928"><div class="ttname"><a href="group__tsd-gen_ga4ec36c6d71e373aa785a7542a3673928.html#ga4ec36c6d71e373aa785a7542a3673928">tsd::randn</a></div><div class="ttdeci">ArrayXf randn(int n)</div><div class="ttdoc">Loi normale (vecteur colonne).</div></div>
<div class="ttc" id="agroup__tsd-gen_gae9fae5f674602bd178ea4a81a1c08d2b_html_gae9fae5f674602bd178ea4a81a1c08d2b"><div class="ttname"><a href="group__tsd-gen_gae9fae5f674602bd178ea4a81a1c08d2b.html#gae9fae5f674602bd178ea4a81a1c08d2b">tsd::sigchirp2</a></div><div class="ttdeci">ArrayXf sigchirp2(float f0, float f1, int n)</div><div class="ttdoc">Chirp quadratique.</div></div>
</div><!-- fragment --><div class="image">
<img src="fft_correlateur.png" alt="" width="800px"/>
</div>
 </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacetsd.html">tsd</a></li><li class="navelem"><a class="el" href="namespacetsd_1_1fourier.html">fourier</a></li>
    <li class="footer">Généré le Lundi 31 Janvier 2022 09:47:54 pour libtsd par <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
