<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libtsd: tsd::fourier::filtre_fft</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libtsd
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">Librairie C++ pour le traitement du signal</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Généré par Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Recherche','.html');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Page&#160;principale</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="a02024.html"><span>Installation</span></a></li>
      <li><a href="a02025.html"><span>Licence</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Recherche" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('a01192_ga0c01b0b59ae01c0957cfe30a3b92cb5b.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="contents">
<a id="ga0c01b0b59ae01c0957cfe30a3b92cb5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0c01b0b59ae01c0957cfe30a3b92cb5b">&#9670;&nbsp;</a></span>filtre_fft()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::tuple&lt;<a class="el" href="a01176.html#ga9e2377b654c93e22d894bcdcae510500">sptr</a>&lt;<a class="el" href="a01726.html">Filtre</a>&lt;<a class="el" href="a01176.html#ga9da159320f29c3ccd16bb8b97e268ab2">cfloat</a>, <a class="el" href="a01176.html#ga9da159320f29c3ccd16bb8b97e268ab2">cfloat</a>, <a class="el" href="a01410.html">FiltreFFTConfig</a>&gt; &gt;, int&gt; tsd::fourier::filtre_fft </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a01410.html">FiltreFFTConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<h3>Création d'un filtre fréquentiel</h3>
<p>Pour différentes raisons, il peut être plus intéressant de filtrer dans le domaine fréquentiel que temporel, par exemple pour alléger la charge de calcul (les convolutions deviennent de simples produits termes à termes en fréquentiel). Par filtrage fréquentiel, on entends le fait de pouvoir modifier terme par terme les composantes de la transformée de Fourier d'un signal, puis de pouvoir restituer un signal temporel.</p>
<p>Afin de travailler dans le domaine fréquentiel, les données sont regroupées par blocs de \(N_e\) échantillons, et pour chacun de ces blocs les opérations suivantes sont effectuées :</p><ul>
<li><b>Fenêtrage et recouvrement</b> (optionnel) : Afin de lisser les traitements d'un blocs à l'autre, une fenêtre d'apodisation peut être appliquée (par défaut, une fenêtre de Hann avec un recouvrement de 50 %, de manière à avoir une reconstruction parfaite).</li>
<li><b>Zéro-padding</b> : De manière à avoir pouvoir calculer efficacement les FFT, des zéros sont ajoutés afin d'avoir des blocs dont la dimension est une puissance de 2. Après zéro-padding, la dimension des blocs vaut \(N=2^k\geq N_e\).</li>
<li><b>Transformée de Fourier :</b> via une FFT.</li>
<li><b>Traitement dans le domaine fréquentiel</b> : à faire par l'utilisateur (callback passée en paramètre, voir ci-dessous).</li>
<li><b>Transformée de Fourier inverse : </b> via une FFT inverse.</li>
<li><b>Recomposition des blocs temporels</b> : par OLA (<em>OverLap-and-Add</em>).</li>
</ul>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>La structure de configuration (<a class="el" href="a01410.html">FiltreFFTConfig</a>) doit préciser la dimension \(N_e\) des blocs temporels, le nombre minimum de zéros à insérer avant chaque bloc et avant de passer dans le domaine fréquentiel, ainsi qu'une callback permettant à l'appelant de modifier le signal dans le domaine fréquentiel.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Renvoie</dt><dd>Un tuple de deux éléments :<ul>
<li>le filtre OLA,</li>
<li>un entier indiquant la dimension \(N\) des FFT (c'est-à-dire la dimension des vecteurs qui seront passés à la callback)</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Pour le problème plus spécifique du calcul efficace d'un filtre RIF (à partir de la FFT), utilisez plutôt <a class="el" href="a01186_ga43a77b47df0bf36e10bc437e81f8d721.html#ga43a77b47df0bf36e10bc437e81f8d721">filtre_rif_fft()</a>, qui est est basée sur cette fonction, et qui plus simple à utiliser. </dd></dl>
<dl class="section user"><dt>Exemple : Filtrage passe-bas</dt><dd>Dans cet exemple, on filtre passe-bas un signal en mettant tout simplement à zéro la moitié des composantes fréquentielles. <div class="fragment"><div class="line">  <span class="keywordtype">int</span> n = 8192;</div>
<div class="line">  <span class="comment">// signal utile à f = 0.04 * fe Hz, et parasite à f=0.400 * fe Hz</span></div>
<div class="line">  ArrayXcf x = <a class="code" href="a01177_ga75902afd67b092895425e71c6f4189ba.html#ga75902afd67b092895425e71c6f4189ba">sigsin</a>(0.004, n) + <a class="code" href="a01177_ga75902afd67b092895425e71c6f4189ba.html#ga75902afd67b092895425e71c6f4189ba">sigsin</a>(0.4, n);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  <a class="code" href="a01410.html">tsd::fourier::FiltreFFTConfig</a> config;</div>
<div class="line">  <span class="comment">// Cette callback sera appelée à chaque itération de l&#39;OLA</span></div>
<div class="line">  config.<a class="code" href="a01410.html#a35857c92e8b81ded86be8c44acb6950a">traitement_freq</a> = [&amp;](ArrayXcf &amp;X)</div>
<div class="line">    {</div>
<div class="line">    tsd_assert(X.rows() == 512);</div>
<div class="line">      X.segment(128, 256).setZero();</div>
<div class="line">    };</div>
<div class="line">  config.<a class="code" href="a01410.html#a7713632f5230fc4685b21b8d1d402fbe">dim_blocs_temporel</a>   = 512;  <span class="comment">// Par bloc de 512 échantillons</span></div>
<div class="line">  config.<a class="code" href="a01410.html#afa140b1932bcdcf3c159fb31d9d0c395">nb_zeros_min</a>         = 0;    <span class="comment">// Zéro-padding non nécessaire</span></div>
<div class="line">  config.<a class="code" href="a01410.html#abaefabb7283538aa961732203b8cb6f9">avec_fenetrage</a>       = <span class="keyword">true</span>; <span class="comment">// Fenêtre de Hann et recouvrement de 50 %</span></div>
<div class="line"> </div>
<div class="line">  <span class="keyword">auto</span> [ola, N] = <a class="code" href="a01192_ga0c01b0b59ae01c0957cfe30a3b92cb5b.html#ga0c01b0b59ae01c0957cfe30a3b92cb5b">tsd::fourier::filtre_fft</a>(config);</div>
<div class="line"> </div>
<div class="line">  ArrayXf y = (ola-&gt;step(x)).real();</div>
<div class="ttc" id="aa01177_ga75902afd67b092895425e71c6f4189ba_html_ga75902afd67b092895425e71c6f4189ba"><div class="ttname"><a href="a01177_ga75902afd67b092895425e71c6f4189ba.html#ga75902afd67b092895425e71c6f4189ba">tsd::sigsin</a></div><div class="ttdeci">ArrayXf sigsin(float f, int n)</div><div class="ttdoc">Calcul efficace d'une sinusoide.</div></div>
<div class="ttc" id="aa01192_ga0c01b0b59ae01c0957cfe30a3b92cb5b_html_ga0c01b0b59ae01c0957cfe30a3b92cb5b"><div class="ttname"><a href="a01192_ga0c01b0b59ae01c0957cfe30a3b92cb5b.html#ga0c01b0b59ae01c0957cfe30a3b92cb5b">tsd::fourier::filtre_fft</a></div><div class="ttdeci">std::tuple&lt; sptr&lt; Filtre&lt; cfloat, cfloat, FiltreFFTConfig &gt; &gt;, int &gt; filtre_fft(const FiltreFFTConfig &amp;config)</div><div class="ttdoc">Création d'un filtre dans le domaine fréquentiel (technique OLA / OverLap-and-Add).</div></div>
<div class="ttc" id="aa01410_html"><div class="ttname"><a href="a01410.html">tsd::fourier::FiltreFFTConfig</a></div><div class="ttdoc">Structure de configuration pour un filtre FFT (voir filtre_fft()).</div><div class="ttdef"><b>Definition:</b> <a href="a01076_source.html#l00309">fourier.hpp:310</a></div></div>
<div class="ttc" id="aa01410_html_a35857c92e8b81ded86be8c44acb6950a"><div class="ttname"><a href="a01410.html#a35857c92e8b81ded86be8c44acb6950a">tsd::fourier::FiltreFFTConfig::traitement_freq</a></div><div class="ttdeci">std::function&lt; void(ArrayXcf &amp;)&gt; traitement_freq</div><div class="ttdoc">Callback appelée pour le traitement dans le domaine fréquentiel (à réaliser par l'utilisateur).</div><div class="ttdef"><b>Definition:</b> <a href="a01076_source.html#l00323">fourier.hpp:323</a></div></div>
<div class="ttc" id="aa01410_html_a7713632f5230fc4685b21b8d1d402fbe"><div class="ttname"><a href="a01410.html#a7713632f5230fc4685b21b8d1d402fbe">tsd::fourier::FiltreFFTConfig::dim_blocs_temporel</a></div><div class="ttdeci">int dim_blocs_temporel</div><div class="ttdoc">Nombre d'échantillons par bloc temporel (ou zéro si déterminé automatiquement)</div><div class="ttdef"><b>Definition:</b> <a href="a01076_source.html#l00312">fourier.hpp:312</a></div></div>
<div class="ttc" id="aa01410_html_abaefabb7283538aa961732203b8cb6f9"><div class="ttname"><a href="a01410.html#abaefabb7283538aa961732203b8cb6f9">tsd::fourier::FiltreFFTConfig::avec_fenetrage</a></div><div class="ttdeci">bool avec_fenetrage</div><div class="ttdoc">Si vrai, une fenêtre de Hann est utilisée, avec un recouvrement de 1/2 pour un reconstruction parfait...</div><div class="ttdef"><b>Definition:</b> <a href="a01076_source.html#l00319">fourier.hpp:319</a></div></div>
<div class="ttc" id="aa01410_html_afa140b1932bcdcf3c159fb31d9d0c395"><div class="ttname"><a href="a01410.html#afa140b1932bcdcf3c159fb31d9d0c395">tsd::fourier::FiltreFFTConfig::nb_zeros_min</a></div><div class="ttdeci">int nb_zeros_min</div><div class="ttdoc">Nombre minimum de zéros insérés en début de bloc (&quot;zéro-padding&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="a01076_source.html#l00315">fourier.hpp:315</a></div></div>
</div><!-- fragment --><div class="image">
<img src="ex-ola-pb.png" alt="" width="800px"/>
</div>
</dd></dl>
<dl class="section see"><dt>Voir également</dt><dd><a class="el" href="a01186_ga43a77b47df0bf36e10bc437e81f8d721.html#ga43a77b47df0bf36e10bc437e81f8d721" title="Implémentation efficace d&#39;un filtre RIF par FFT.">filtre_rif_fft()</a>, filtre_rfft() </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a01216.html">tsd</a></li><li class="navelem"><a class="el" href="a01226.html">fourier</a></li>
    <li class="footer">Généré le Vendredi 28 Janvier 2022 16:23:17 pour libtsd par <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
