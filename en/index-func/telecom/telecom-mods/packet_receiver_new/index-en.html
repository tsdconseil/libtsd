<!doctype html>
<html class="no-js">
  <head><link rel="stylesheet" href="../../../..//highlight/styles/default.css">
    <script src="../../../..//highlight/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
<script src="../../../../js/jquery-1.7.min.js" type="text/javascript"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script><meta charset="UTF-8"/>
      <title>packet_receiver_new</title>
<meta name="description" content="packet_receiver_new"/>
<!--[if lt IE 9]>
      <script src="../../../../js/css3-mediaqueries.js"></script>
    <![endif]-->
    <link rel="stylesheet" media="all" href="../../../../css/style.css"/>
    <link rel="stylesheet" media="all" href="../../../../css/style_scilab_code.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
<script src="../../../../js/custom.js"></script>
<script src="../../../../js/tabs.js"></script><script src="../../../../js/masonry.min.js" ></script>
<script src="../../../../js/imagesloaded.js" ></script><link rel="stylesheet" href="../../../../css/jquery.tweet.css" media="all"  /> 
<script src="../../../../js/tweet/jquery.tweet.js" ></script>
<link rel="stylesheet" media="screen" href="../../../../css/superfish.css" /> 
<script  src="../../../../js/superfish-1.4.8/js/hoverIntent.js"></script>
<script  src="../../../../js/superfish-1.4.8/js/superfish.js"></script>
<script  src="../../../../js/superfish-1.4.8/js/supersubs.js"></script>
<script  src="../../../../js/prettyPhoto/js/jquery.prettyPhoto.js"></script>
<link rel="stylesheet" href="../../../../js/prettyPhoto/css/prettyPhoto.css"  media="screen" />
<link rel="stylesheet" href="../../../../js/poshytip-1.1/src/tip-twitter/tip-twitter.css"  />
<link rel="stylesheet" href="../../../../js/poshytip-1.1/src/tip-yellowsimple/tip-yellowsimple.css"  />
<script  src="../../../../js/poshytip-1.1/src/jquery.poshytip.min.js"></script>
<link rel="stylesheet" href="../../../../css/flexslider.css" >
<script src="../../../../js/jquery.flexslider-min.js"></script>
<!--[if IE 6]>
    <link rel="stylesheet" href="../../../../css/ie6-hacks.css" media="screen" />
    <script type="text/javascript" src="../../../../js/DD_belatedPNG.js"></script>
      <script>
              /* EXAMPLE */
              DD_belatedPNG.fix('*');
          </script>
    <![endif]-->
<link rel="stylesheet" media="all" href="../../../../css/lessgrid.css"/>
<script src="../../../../js/modernizr.js"></script>
<link rel="alternate" hreflang="fr" href="http://www.tsdconseil.fr/index-func/telecom/telecom-mods/packet_receiver_new/index.html"/>
<link rel="alternate" hreflang="en" href="http://www.tsdconseil.fr/index-func/telecom/telecom-mods/packet_receiver_new/index-en.html"/>
<link rel="alternate" hreflang="de" href="http://www.tsdconseil.fr/index-func/telecom/telecom-mods/packet_receiver_new/index-de.html"/>
</head>
  <body lang="fr">
    <!-- mobile-nav -->
    <div id="mobile-nav-holder">
      <div class="wrapper">
        <ul id="mobile-nav"><li><a href="../../../../index/index-en.html">Libtsd<span class="subheader">&#160;</span></a></li>
<li class="current-menu-item"><a href="../../../../index-func/index-en.html">Documentation<span class="subheader">&#160;</span></a><ul><li><a href="../../../../index-func/tsd/index-en.html">General functions</a></li><li><a href="../../../../index-func/vue/index-en.html">Visualizations</a></li><li><a href="../../../../index-func/geometrie/index-en.html">Geometry</a></li><li><a href="../../../../index-func/ct/index-en.html">Continuous time signals</a></li><li><a href="../../../../index-func/filtrage/index-en.html">Linear filtering</a></li><li><a href="../../../../index-func/fourier/index-en.html">Fourier transform</a></li><li><a href="../../../../index-func/temps-frequence/index-en.html">Time-frequency representations</a></li><li><a href="../../../../index-func/stats/index-en.html">Statistical signal processing</a></li><li><a href="../../../../index-func/telecom/index-en.html">Telecommunications</a></li><li><a href="../../../../index-func/apps/index-en.html">Applications</a></li></ul></li>
<li><a href="../../../../tab-tutos/index-en.html">Examples<span class="subheader">&#160;</span></a><ul><li><a href="../../../../tab-tutos/ex-echan/index-en.html">Sampling</a></li><li><a href="../../../../tab-tutos/ex-filtrage/index-en.html">Linear filtering</a></li><li><a href="../../../../tab-tutos/ex-fourier/index-en.html">Fourier transform</a></li><li><a href="../../../../tab-tutos/ex-telecom/index-en.html">Telecommunications</a></li></ul></li>
<li><a href="../../../../tab-install/index-en.html">Installation<span class="subheader">&#160;</span></a></li>
<li><a href="../../../../tab-licence/index-en.html">License<span class="subheader">&#160;</span></a></li>
        </ul>
        <div id="nav-open"><a href="#">Menu</a></div>
      </div>
    </div>
    <!-- ENDS mobile-nav --><header><div class="wrapper">
      <a href="../../../../index/index-en.html" id="logo"><table><tr><td><img  src="../../../../img/logo.png" alt="TSD Conseil - Traitement du Signal Digital"/></td></tr><tr><td><p id="slogan">C++ signal processing</p></td></tr></table></a>
      <nav>
        <ul id="nav" class="sf-menu"><li><a href="../../../../index/index-en.html">Libtsd<span class="subheader">&#160;</span></a></li>
<li class="current-menu-item"><a href="../../../../index-func/index-en.html">Documentation<span class="subheader">&#160;</span></a><ul><li><a href="../../../../index-func/tsd/index-en.html">General functions</a></li><li><a href="../../../../index-func/vue/index-en.html">Visualizations</a></li><li><a href="../../../../index-func/geometrie/index-en.html">Geometry</a></li><li><a href="../../../../index-func/ct/index-en.html">Continuous time signals</a></li><li><a href="../../../../index-func/filtrage/index-en.html">Linear filtering</a></li><li><a href="../../../../index-func/fourier/index-en.html">Fourier transform</a></li><li><a href="../../../../index-func/temps-frequence/index-en.html">Time-frequency representations</a></li><li><a href="../../../../index-func/stats/index-en.html">Statistical signal processing</a></li><li><a href="../../../../index-func/telecom/index-en.html">Telecommunications</a></li><li><a href="../../../../index-func/apps/index-en.html">Applications</a></li></ul></li>
<li><a href="../../../../tab-tutos/index-en.html">Examples<span class="subheader">&#160;</span></a><ul><li><a href="../../../../tab-tutos/ex-echan/index-en.html">Sampling</a></li><li><a href="../../../../tab-tutos/ex-filtrage/index-en.html">Linear filtering</a></li><li><a href="../../../../tab-tutos/ex-fourier/index-en.html">Fourier transform</a></li><li><a href="../../../../tab-tutos/ex-telecom/index-en.html">Telecommunications</a></li></ul></li>
<li><a href="../../../../tab-install/index-en.html">Installation<span class="subheader">&#160;</span></a></li>
<li><a href="../../../../tab-licence/index-en.html">License<span class="subheader">&#160;</span></a></li>
          </ul>
        </nav>
        
        <div class="clearfix"></div>
        
      </div>
    </header>    <div id="main">
    <div id="content">
    <div id="masthead">
          <h1 class="head">packet_receiver_new</h1><span class="subhead"></span>
          <ul class="breadcrumbs"><li><a href="../../../../index-func/index-en.html">Documentation</a></li><li> / <a href="../../../../index-func/telecom/index-en.html">Telecommunications</a></li><li> / <a href="../../../../index-func/telecom/telecom-mods/index-en.html">Digital modulations</a></li><li> / packet_receiver_new</li></ul>
        </div>
<div id="page-content-full"><p>Création d'un récepteur de trame. </p><p>Namespace:<code>dsp::telecom</code><br/></p><h2><a name="3"></a>Prototype</h2><p><pre class="prototype">sptr&lt;PacketReceiver&gt; <b>packet_receiver_new</b>(const PacketReceiverConfig &rc)</pre></p><h2><a name="4"></a>Description</h2><p>Un récepteur est constitué de trois sous-blocs suivant :<orderedlist><li>Une détecteur d'en-tête de synchronisation.</li><li>Un interpolateur, permettant de passer au rythme symbole et dont le retard est réglé d'après celui mesuré par le détecteur.</li><li>Un démodulateur fonctionnant à la fréquence symbole (pas de de correction d'horloge), dont la boucle de correction de phase (ainsi que la CAG) est initialisée en fonction des paramètres RF détectés sur le motif de synchronisation.</li></orderedlist></p><p><h3 level="4">Description détaillée du fonctionnement</h3></p><p>L'implémentation (src/telecom/recepteur.cc) réalise les opérations suivantes :<orderedlist><li>Les données reçues sont d'abord découpées en bloc de \(N_e\) échantillons (méthode "step()" appelée depuis l'extérieur), traités ensuite par la méthode "step_Ne()".</li><li>Le détecteur de motif (voir détecteur_création()) est appelé sur chaque bloc</li><li>Pour chaque motif de synchronisation trouvé par le détecteur, les échantillons I/Q correspondant au début des données utiles sont extraits, puis dans la méthode step_demod() :<orderedlist><li>Appel de l'interpolateur (correction d'horloge)</li><li>Appel du filtre adapté</li><li>Décimation au rythme symbole</li><li>Calage du premier échantillon sur le milieu du premier symbole</li><li>Appel du démodulateur (voir démodulateur_création())</li></orderedlist></li></orderedlist></p><p><dl class="section note"><dd><b>Note<br/></b></dd><dd>Dans une future version, les étapes 3a, 3b et 3c seront fusionnées en un seul filtre d'interpolation polyphase, basé sur le filtre de mise en forme.</dd></dl><br/><para en="Exemple"><description lang="en"><p><pre><code class="C++"><highlight class="normal"></highlight>
<highlight class="normal">  </highlight><highlight class="comment">// Configuration de l'émetteur</highlight>
<highlight class="comment"></highlight><highlight class="normal">  ÉmetteurConfig ec;</highlight>
<highlight class="normal">  </highlight><highlight class="comment">// En-tête de synchonisation (13 bits)</highlight><highlight class="normal"></highlight>
<highlight class="normal">  ec.format.entete = <a href="../../../../index-func/telecom/telecom-codes-synchro/code_Barker/index-en.html">code_Barker</a>(13);</highlight>
<highlight class="normal">  </highlight><highlight class="comment">// Nombre de bits utiles</highlight><highlight class="normal"></highlight>
<highlight class="normal">  ec.format.nbits  = 16;</highlight>
<highlight class="normal">  </highlight><highlight class="comment">// Facteur de sur-échantillonnage = 8</highlight><highlight class="normal"></highlight>
<highlight class="normal">  ec.format.modulation.fsymb  = 1;</highlight>
<highlight class="normal">  ec.format.modulation.fe     = 8;</highlight>
<highlight class="normal">  </highlight><highlight class="comment">// BPSK, avec filtre SRRC (60 % de dépassement)</highlight><highlight class="normal"></highlight>
<highlight class="normal">  ec.format.modulation.forme_onde = forme_onde_bpsk(SpecFiltreMiseEnForme::rcs(0.6));</highlight>
<highlight class="normal"></highlight>
<highlight class="normal">  </highlight><highlight class="comment">// Instanciation de l'émetteur</highlight><highlight class="normal"></highlight>
<highlight class="normal">  soit tx = émetteur_création(ec);</highlight>
<highlight class="normal"></highlight>
<highlight class="normal">  RécepteurConfig rc;</highlight>
<highlight class="normal">  rc.format = ec.format;</highlight>
<highlight class="normal"></highlight>
<highlight class="normal">  soit rx = récepteur_création(rc);</highlight>
<highlight class="normal"></highlight>
<highlight class="normal">  </highlight><highlight class="comment">// 16 bits alternés (101010...)</highlight><highlight class="normal"></highlight>
<highlight class="normal">  soit data = BitStream::altern(16);</highlight>
<highlight class="normal"></highlight>
<highlight class="normal">  </highlight><highlight class="comment">// Emission d'une trame</highlight><highlight class="normal"></highlight>
<highlight class="normal">  soit iq = tx-&gt;step(data);</highlight>
<highlight class="normal"></highlight>
<highlight class="normal">  </highlight><highlight class="comment">// Note : flush du signal (car le récepteur réagit avec du retard)</highlight><highlight class="normal"></highlight>
<highlight class="normal">  soit trames = rx-&gt;step(iq | Veccf::zeros(2000));</highlight>
<highlight class="normal"></highlight>
<highlight class="normal">  Figures f;</highlight>
<highlight class="normal">  f.subplot(141).plot(ec.format.entete.array(), </highlight><highlight class="stringliteral">"|bo"</highlight><highlight class="normal">, </highlight><highlight class="stringliteral">"En-tête de synchronisation"</highlight><highlight class="normal">);</highlight>
<highlight class="normal">  f.subplot(142).plot(data.array(), </highlight><highlight class="stringliteral">"|go"</highlight><highlight class="normal">, </highlight><highlight class="stringliteral">"Données envoyées"</highlight><highlight class="normal">);</highlight>
<highlight class="normal">  f.subplot(143).plot(iq, </highlight><highlight class="stringliteral">"-m"</highlight><highlight class="normal">);</highlight>
<highlight class="normal">  f.gcf().titre(</highlight><highlight class="stringliteral">"Trame modulée (en-tête + données)"</highlight><highlight class="normal">);</highlight>
<highlight class="normal">  si(!trames.empty())</highlight>
<highlight class="normal">    f.subplot(144).plot(trames[0].bs.array(), "|go", "Données décodées");</highlight>
<highlight class="normal"></highlight>
</code></pre></p><img src="ex-recepteur.png" style="height: 100%; width: 100%; object-fit: contain"></img></description></para></p><h2><a name="5"></a>See also</h2><p>émetteur_création(), détecteur_création() </p></div></div><div class="clearfix"></div>
        <div class="shadow-main"></div></div><footer><div class="wrapper">
<center><p></p></center></div></footer><script>initialize();</script></body></html>