<!doctype html>
<html class="no-js">
  <head><link rel="stylesheet" href="../../../..//highlight/styles/default.css">
    <script src="../../../..//highlight/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
<script src="../../../../js/jquery-1.7.min.js" type="text/javascript"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script><meta charset="UTF-8"/>
      <title>demodulator_new</title>
<meta name="description" content="demodulator_new"/>
<!--[if lt IE 9]>
      <script src="../../../../js/css3-mediaqueries.js"></script>
    <![endif]-->
    <link rel="stylesheet" media="all" href="../../../../css/style.css"/>
    <link rel="stylesheet" media="all" href="../../../../css/style_scilab_code.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
<script src="../../../../js/custom.js"></script>
<script src="../../../../js/tabs.js"></script><script src="../../../../js/masonry.min.js" ></script>
<script src="../../../../js/imagesloaded.js" ></script><link rel="stylesheet" href="../../../../css/jquery.tweet.css" media="all"  /> 
<script src="../../../../js/tweet/jquery.tweet.js" ></script>
<link rel="stylesheet" media="screen" href="../../../../css/superfish.css" /> 
<script  src="../../../../js/superfish-1.4.8/js/hoverIntent.js"></script>
<script  src="../../../../js/superfish-1.4.8/js/superfish.js"></script>
<script  src="../../../../js/superfish-1.4.8/js/supersubs.js"></script>
<script  src="../../../../js/prettyPhoto/js/jquery.prettyPhoto.js"></script>
<link rel="stylesheet" href="../../../../js/prettyPhoto/css/prettyPhoto.css"  media="screen" />
<link rel="stylesheet" href="../../../../js/poshytip-1.1/src/tip-twitter/tip-twitter.css"  />
<link rel="stylesheet" href="../../../../js/poshytip-1.1/src/tip-yellowsimple/tip-yellowsimple.css"  />
<script  src="../../../../js/poshytip-1.1/src/jquery.poshytip.min.js"></script>
<link rel="stylesheet" href="../../../../css/flexslider.css" >
<script src="../../../../js/jquery.flexslider-min.js"></script>
<!--[if IE 6]>
    <link rel="stylesheet" href="../../../../css/ie6-hacks.css" media="screen" />
    <script type="text/javascript" src="../../../../js/DD_belatedPNG.js"></script>
      <script>
              /* EXAMPLE */
              DD_belatedPNG.fix('*');
          </script>
    <![endif]-->
<link rel="stylesheet" media="all" href="../../../../css/lessgrid.css"/>
<script src="../../../../js/modernizr.js"></script>
<link rel="alternate" hreflang="fr" href="http://www.tsdconseil.fr/index-func/telecom/telecom-mods/demodulator_new/index.html"/>
<link rel="alternate" hreflang="en" href="http://www.tsdconseil.fr/index-func/telecom/telecom-mods/demodulator_new/index-en.html"/>
<link rel="alternate" hreflang="de" href="http://www.tsdconseil.fr/index-func/telecom/telecom-mods/demodulator_new/index-de.html"/>
</head>
  <body lang="fr">
    <!-- mobile-nav -->
    <div id="mobile-nav-holder">
      <div class="wrapper">
        <ul id="mobile-nav"><li><a href="../../../../index/index-en.html">Libtsd<span class="subheader">&#160;</span></a></li>
<li class="current-menu-item"><a href="../../../../index-func/index-en.html">Documentation<span class="subheader">&#160;</span></a><ul><li><a href="../../../../index-func/tsd/index-en.html">General functions</a></li><li><a href="../../../../index-func/vue/index-en.html">Visualizations</a></li><li><a href="../../../../index-func/geometrie/index-en.html">Geometry</a></li><li><a href="../../../../index-func/ct/index-en.html">Continuous time signals</a></li><li><a href="../../../../index-func/filtrage/index-en.html">Linear filtering</a></li><li><a href="../../../../index-func/fourier/index-en.html">Fourier transform</a></li><li><a href="../../../../index-func/temps-frequence/index-en.html">Time-frequency representations</a></li><li><a href="../../../../index-func/stats/index-en.html">Statistical signal processing</a></li><li><a href="../../../../index-func/telecom/index-en.html">Telecommunications</a></li><li><a href="../../../../index-func/apps/index-en.html">Applications</a></li></ul></li>
<li><a href="../../../../tab-tutos/index-en.html">Examples<span class="subheader">&#160;</span></a><ul><li><a href="../../../../tab-tutos/ex-echan/index-en.html">Sampling</a></li><li><a href="../../../../tab-tutos/ex-filtrage/index-en.html">Linear filtering</a></li><li><a href="../../../../tab-tutos/ex-fourier/index-en.html">Fourier transform</a></li><li><a href="../../../../tab-tutos/ex-telecom/index-en.html">Telecommunications</a></li></ul></li>
<li><a href="../../../../tab-install/index-en.html">Installation<span class="subheader">&#160;</span></a></li>
<li><a href="../../../../tab-licence/index-en.html">License<span class="subheader">&#160;</span></a></li>
        </ul>
        <div id="nav-open"><a href="#">Menu</a></div>
      </div>
    </div>
    <!-- ENDS mobile-nav --><header><div class="wrapper">
      <a href="../../../../index/index-en.html" id="logo"><table><tr><td><img  src="../../../../img/logo.png" alt="TSD Conseil - Traitement du Signal Digital"/></td></tr><tr><td><p id="slogan">C++ signal processing</p></td></tr></table></a>
      <nav>
        <ul id="nav" class="sf-menu"><li><a href="../../../../index/index-en.html">Libtsd<span class="subheader">&#160;</span></a></li>
<li class="current-menu-item"><a href="../../../../index-func/index-en.html">Documentation<span class="subheader">&#160;</span></a><ul><li><a href="../../../../index-func/tsd/index-en.html">General functions</a></li><li><a href="../../../../index-func/vue/index-en.html">Visualizations</a></li><li><a href="../../../../index-func/geometrie/index-en.html">Geometry</a></li><li><a href="../../../../index-func/ct/index-en.html">Continuous time signals</a></li><li><a href="../../../../index-func/filtrage/index-en.html">Linear filtering</a></li><li><a href="../../../../index-func/fourier/index-en.html">Fourier transform</a></li><li><a href="../../../../index-func/temps-frequence/index-en.html">Time-frequency representations</a></li><li><a href="../../../../index-func/stats/index-en.html">Statistical signal processing</a></li><li><a href="../../../../index-func/telecom/index-en.html">Telecommunications</a></li><li><a href="../../../../index-func/apps/index-en.html">Applications</a></li></ul></li>
<li><a href="../../../../tab-tutos/index-en.html">Examples<span class="subheader">&#160;</span></a><ul><li><a href="../../../../tab-tutos/ex-echan/index-en.html">Sampling</a></li><li><a href="../../../../tab-tutos/ex-filtrage/index-en.html">Linear filtering</a></li><li><a href="../../../../tab-tutos/ex-fourier/index-en.html">Fourier transform</a></li><li><a href="../../../../tab-tutos/ex-telecom/index-en.html">Telecommunications</a></li></ul></li>
<li><a href="../../../../tab-install/index-en.html">Installation<span class="subheader">&#160;</span></a></li>
<li><a href="../../../../tab-licence/index-en.html">License<span class="subheader">&#160;</span></a></li>
          </ul>
        </nav>
        
        <div class="clearfix"></div>
        
      </div>
    </header>    <div id="main">
    <div id="content">
    <div id="masthead">
          <h1 class="head">demodulator_new</h1><span class="subhead"></span>
          <ul class="breadcrumbs"><li><a href="../../../../index-func/index-en.html">Documentation</a></li><li> / <a href="../../../../index-func/telecom/index-en.html">Telecommunications</a></li><li> / <a href="../../../../index-func/telecom/telecom-mods/index-en.html">Digital modulations</a></li><li> / demodulator_new</li></ul>
        </div>
<div id="page-content-full"><p>Création d'un démodulateur numérique. </p><p>Namespace: <code>dsp::telecom</code><br/></p><h2><a name="3"></a>Prototype</h2><p><pre class="prototype">sptr&lt;Demodulator&gt; <b>demodulator_new</b>(const ModConfig &modconfig, const DemodConfig &demodconfig=DemodConfig())</pre></p><h2><a name="4"></a>Parameters</h2><p><table class="formtable2"><tr><td>modconfig</td><td>Structure de configuration, permettant de choisir la forme d'onde, les fréquences, ... (voir <a href="../../../../index-func/telecom/telecom-mods/ModConfig/index-en.html">ModConfig</a>) </td></tr><tr><td>demodconfig</td><td>Structure de configuration, permettant de choisir l'architecture et les paramètres du démodulateur (voir <a href="../../../../index-func/telecom/telecom-mods/DemodConfig/index-en.html">DemodConfig</a>)</td></tr></table></p><h2><a name="5"></a>Description</h2><p>Un démodulateur consiste ici à convertir un signal en bande de base (ou transposé à une fréquence intermédiaire) vers un train binaire (ou un train de LLR symboles, pour le cas où un code correcteur est utilisé en aval).</p><p>La première étape (optionnelle) de la démodulation consiste à transposer un signal centré autour d'une fréquence intermédiaire donnée vers un signal bande de base. Cette étape comprends éventuellement une décimation, afin d'alléger les traitemens ultérieurs (une fois en bande de base, la fréquence d'échanitillonnage peut être réduite) :</p><p><img src="demod-glob.png" max-width="400px"></img><p style="text-align:center">Démodulation - transposition en bande de base</p></p><p>La deuxième étape est la démodulation des signaux, qui est possible suivant deux architectures décrites ci-après :</p><ul><li>Architecture dite <b>basée sur la décision</b> : c'est l'architecture permettant la meilleure sensibilité, et c'est donc celle-ci qui est recommandée.</li></ul><p><dl class="section warning"><dd><b>Warning<br/></b></dd><dd>Un inconvénient de cette architecture est qu'il est nécessaire d'avoir un en-tête en début de trame afin de pré-acrocher les boucles de correction.</dd></dl><br/></p><ul><li>Architecture <b>non basée sur la décision</b>. Elle présente l'avantage de pouvoir s'accrocher sur un signal en cours de route, même si les erreurs initiales de fréquence ou d'horloge sont importantes, alors que la première nécessite une "pré-accroche".</li></ul><p><dl class="section warning"><dd><b>Warning<br/></b></dd><dd>Contrairement à la première architecture, celle-ci fonctionnera très mal pour des modulations d'ordre élevé (8PSK, QAM, etc.), du fait des détecteurs d'erreur d'horloge et de phase utilisés, très sensibles à la modulation.</dd></dl><br/><h3 level="4">1. Architecture basée sur la décision</h3></p><p>Cette architecture est dite basée sur la décision, car les détections d'erreurs d'horloge et de phase sont déduite après la "décision" sur chaque symbole, c'est-à-dire le démapping. Elle est constituée des blocs suivants (dans l'ordre) :<orderedlist><li>Filtrage adapté,</li><li>Correction de phase / fréquence,</li><li>Correction d'horloge (interpolation),</li><li>Démapping (décision symbole le plus proche),</li><li>Calcul des erreurs d'horloge et de phase / mise à jour des corrections. <img src="demod-archi1.png" max-width="400px"></img><p style="text-align:center">Démodulation bande de base - architecture basée sur la décision</p></li></orderedlist></p><p><h4 level="5">Correction d'horloge</h4></p><p>La correction d'horloge est basée sur le détecteur d'erreur suivant :  <formula id="273">\[
   \epsilon_k = \frac{\left&lt;d_k - d_{k-1},\ y_{k-1/2} - \frac{d_k + d_{k-1}}{2}\right&gt;}{\left|d_{k-1} - d_k\right|}
\]</formula></p><p>où \(d_k,d_{k-1}\) sont les derniers symboles décodés (après décision), et \(y_{1/2}\) est l'avant dernier symbole interpolé (après correction d'horloge, mais avant décision), sachant que l'interpolation se fait à deux fois le rythme symbole (autrement dit, \(y_{k-1/2}\) est la valeur reçue à mi-chemin entre les symboles \(d_k\) et \(d_{k-1}\)).</p><p>Ce détecteur, adapté du détecteur de Gardner, présente d'avantage de pouvoir fonctionner pour la plupart des types de modulation.</p><p>Le filtre de boucle est un simple filtre du premier ordre, dont la constante de temps est réglable (voir <a href="../../../../index-func/telecom/telecom-mods/DemodConfig/index-en.html">DemodConfig</a>).</p><p><h4 level="5">Correction de phase</h4></p><p>Le détecteur d'erreur de phase est ici très simple, puisque l'on dispose des symboles après décodage :  <formula id="279">\[
 \epsilon_k = \widehat{d_k - y_k}
 \]</formula></p><p>Le filtre de boucle est un filtre du second ordre, dont les paramètres sont réglables (voir <a href="../../../../index-func/telecom/telecom-mods/DemodConfig/index-en.html">DemodConfig</a> et filtre_boucle_ordre_2()).</p><p><h3 level="4">2. Architecture non basée sur la décision</h3></p><p>Cette architecture est constituée des blocs suivants :<orderedlist><li>Filtrage adapté,</li><li>Boucle de recouvrement d'horloge,</li><li>Boucle de recouvrement de porteuse,</li><li>Correction automatique de gain,</li><li>Démapping des symboles.</li></orderedlist></p><p>Dans cette architecture, contrairement à la première, chaque bloc fonctionne indépendemment des autres (il sont juste concaténés en série).</p><p><h2>Exemple : démodulation QPSK</h2><p en="Exemple : démodulation QPSK"><description lang="en"><p><pre><code class="C++"><highlight class="normal">  </highlight><highlight class="comment">// QPSK demodulator (NRZ matched filter),</highlight><highlight class="normal"></highlight>
<highlight class="normal">  </highlight><highlight class="comment">// sampling frequency = 1 MHz, IF = 200 KHz, FSYMB = 20 KHz</highlight><highlight class="normal"></highlight>
<highlight class="normal"></highlight>
<highlight class="normal">  soit wf = forme_onde_qpsk(SpecFiltreMiseEnForme::rcs(0.25));</highlight>
<highlight class="normal"></highlight>
<highlight class="normal">  <a href="../../../../index-func/telecom/telecom-mods/ModConfig/index-en.html">ModConfig</a> mconfig{wf, 100e3, 0, 20e3};</highlight>
<highlight class="normal"></highlight>
<highlight class="normal"></highlight>
<highlight class="normal">  soit demod = démodulateur_création(mconfig);</highlight>
<highlight class="normal"></highlight>
<highlight class="normal">  </highlight><highlight class="comment">// Create a modulator to simulate RF signal</highlight><highlight class="normal"></highlight>
<highlight class="normal">  soit mod = modulateur_création(mconfig);</highlight>
<highlight class="normal"></highlight>
<highlight class="normal">  soit bs = randstream(100);</highlight>
<highlight class="normal">  soit x = mod-&gt;step(bs);</highlight>
<highlight class="normal"></highlight>
<highlight class="normal">  </highlight><highlight class="comment">// Proceed to demodulation</highlight><highlight class="normal"></highlight>
<highlight class="normal">  BitStream bs2;</highlight>
<highlight class="normal">  demod-&gt;step(x, bs2);</highlight>
<highlight class="normal"></highlight>
<highlight class="normal"></highlight>
<highlight class="normal">  Figures f;</highlight>
<highlight class="normal">  f.subplot().plot(bs.array(), </highlight><highlight class="stringliteral">"hb"</highlight><highlight class="normal">, </highlight><highlight class="stringliteral">"Train binaire"</highlight><highlight class="normal">);</highlight>
<highlight class="normal">  f.subplot().plot(x, </highlight><highlight class="stringliteral">""</highlight><highlight class="normal">, </highlight><highlight class="stringliteral">"Données modulées"</highlight><highlight class="normal">);</highlight>
<highlight class="normal">  f.subplot().plot(bs2.array(), </highlight><highlight class="stringliteral">"hb"</highlight><highlight class="normal">, </highlight><highlight class="stringliteral">"Train binaire décodé"</highlight><highlight class="normal">);</highlight>
</code></pre></p><img src="ex-demodulateur.png" style="height: 100%; width: 100%; object-fit: contain"></img><p style="text-align:center">Exemples de démodulation QPSK</p>
 Notez que le train binaire démodulé est décalé dans le temps, ceci est du aux filtres utilisés en réception (ainsi qu'à l'interpolation utilisée pour le recouvrement d'horloge).</description></p></p><h2><a name="6"></a>See also</h2><p>modulateur_création() </p></div></div><div class="clearfix"></div>
        <div class="shadow-main"></div></div><footer><div class="wrapper">
<center><p></p></center></div></footer><script>initialize();</script></body></html>