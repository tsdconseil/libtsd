<!doctype html>
<html class="no-js">
  <head><link rel="stylesheet" href="../../..//highlight/styles/default.css">
    <script src="../../..//highlight/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
<script src="../../../js/jquery-1.7.min.js" type="text/javascript"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script><meta charset="UTF-8"/>
      <title>filter_fft</title>
<meta name="description" content="filter_fft"/>
<!--[if lt IE 9]>
      <script src="../../../js/css3-mediaqueries.js"></script>
    <![endif]-->
    <link rel="stylesheet" media="all" href="../../../css/style.css"/>
    <link rel="stylesheet" media="all" href="../../../css/style_scilab_code.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
<script src="../../../js/custom.js"></script>
<script src="../../../js/tabs.js"></script><script src="../../../js/masonry.min.js" ></script>
<script src="../../../js/imagesloaded.js" ></script><link rel="stylesheet" href="../../../css/jquery.tweet.css" media="all"  /> 
<script src="../../../js/tweet/jquery.tweet.js" ></script>
<link rel="stylesheet" media="screen" href="../../../css/superfish.css" /> 
<script  src="../../../js/superfish-1.4.8/js/hoverIntent.js"></script>
<script  src="../../../js/superfish-1.4.8/js/superfish.js"></script>
<script  src="../../../js/superfish-1.4.8/js/supersubs.js"></script>
<script  src="../../../js/prettyPhoto/js/jquery.prettyPhoto.js"></script>
<link rel="stylesheet" href="../../../js/prettyPhoto/css/prettyPhoto.css"  media="screen" />
<link rel="stylesheet" href="../../../js/poshytip-1.1/src/tip-twitter/tip-twitter.css"  />
<link rel="stylesheet" href="../../../js/poshytip-1.1/src/tip-yellowsimple/tip-yellowsimple.css"  />
<script  src="../../../js/poshytip-1.1/src/jquery.poshytip.min.js"></script>
<link rel="stylesheet" href="../../../css/flexslider.css" >
<script src="../../../js/jquery.flexslider-min.js"></script>
<!--[if IE 6]>
    <link rel="stylesheet" href="../../../css/ie6-hacks.css" media="screen" />
    <script type="text/javascript" src="../../../js/DD_belatedPNG.js"></script>
      <script>
              /* EXAMPLE */
              DD_belatedPNG.fix('*');
          </script>
    <![endif]-->
<link rel="stylesheet" media="all" href="../../../css/lessgrid.css"/>
<script src="../../../js/modernizr.js"></script>
<link rel="alternate" hreflang="fr" href="http://www.tsdconseil.fr/index-func/fourier/filter_fft/index.html"/>
<link rel="alternate" hreflang="en" href="http://www.tsdconseil.fr/index-func/fourier/filter_fft/index-en.html"/>
<link rel="alternate" hreflang="de" href="http://www.tsdconseil.fr/index-func/fourier/filter_fft/index-de.html"/>
</head>
  <body lang="fr">
    <!-- mobile-nav -->
    <div id="mobile-nav-holder">
      <div class="wrapper">
        <ul id="mobile-nav"><li><a href="../../../index/index-en.html">Libtsd<span class="subheader">&#160;</span></a></li>
<li class="current-menu-item"><a href="../../../index-func/index-en.html">Documentation<span class="subheader">&#160;</span></a><ul><li><a href="../../../index-func/tsd/index-en.html">General functions</a></li><li><a href="../../../index-func/vue/index-en.html">Visualizations</a></li><li><a href="../../../index-func/geometrie/index-en.html">Geometry</a></li><li><a href="../../../index-func/ct/index-en.html">Continuous time signals</a></li><li><a href="../../../index-func/filtrage/index-en.html">Linear filtering</a></li><li><a href="../../../index-func/fourier/index-en.html">Fourier transform</a></li><li><a href="../../../index-func/temps-frequence/index-en.html">Time-frequency representations</a></li><li><a href="../../../index-func/stats/index-en.html">Statistical signal processing</a></li><li><a href="../../../index-func/telecom/index-en.html">Telecommunications</a></li><li><a href="../../../index-func/apps/index-en.html">Applications</a></li></ul></li>
<li><a href="../../../tab-tutos/index-en.html">Examples<span class="subheader">&#160;</span></a><ul><li><a href="../../../tab-tutos/ex-echan/index-en.html">Sampling</a></li><li><a href="../../../tab-tutos/ex-filtrage/index-en.html">Linear filtering</a></li><li><a href="../../../tab-tutos/ex-fourier/index-en.html">Fourier transform</a></li><li><a href="../../../tab-tutos/ex-telecom/index-en.html">Telecommunications</a></li></ul></li>
<li><a href="../../../tab-install/index-en.html">Installation<span class="subheader">&#160;</span></a></li>
<li><a href="../../../tab-licence/index-en.html">License<span class="subheader">&#160;</span></a></li>
        </ul>
        <div id="nav-open"><a href="#">Menu</a></div>
      </div>
    </div>
    <!-- ENDS mobile-nav --><header><div class="wrapper">
      <a href="../../../index/index-en.html" id="logo"><table><tr><td><img  src="../../../img/logo.png" alt="TSD Conseil - Traitement du Signal Digital"/></td></tr><tr><td><p id="slogan">C++ signal processing</p></td></tr></table></a>
      <nav>
        <ul id="nav" class="sf-menu"><li><a href="../../../index/index-en.html">Libtsd<span class="subheader">&#160;</span></a></li>
<li class="current-menu-item"><a href="../../../index-func/index-en.html">Documentation<span class="subheader">&#160;</span></a><ul><li><a href="../../../index-func/tsd/index-en.html">General functions</a></li><li><a href="../../../index-func/vue/index-en.html">Visualizations</a></li><li><a href="../../../index-func/geometrie/index-en.html">Geometry</a></li><li><a href="../../../index-func/ct/index-en.html">Continuous time signals</a></li><li><a href="../../../index-func/filtrage/index-en.html">Linear filtering</a></li><li><a href="../../../index-func/fourier/index-en.html">Fourier transform</a></li><li><a href="../../../index-func/temps-frequence/index-en.html">Time-frequency representations</a></li><li><a href="../../../index-func/stats/index-en.html">Statistical signal processing</a></li><li><a href="../../../index-func/telecom/index-en.html">Telecommunications</a></li><li><a href="../../../index-func/apps/index-en.html">Applications</a></li></ul></li>
<li><a href="../../../tab-tutos/index-en.html">Examples<span class="subheader">&#160;</span></a><ul><li><a href="../../../tab-tutos/ex-echan/index-en.html">Sampling</a></li><li><a href="../../../tab-tutos/ex-filtrage/index-en.html">Linear filtering</a></li><li><a href="../../../tab-tutos/ex-fourier/index-en.html">Fourier transform</a></li><li><a href="../../../tab-tutos/ex-telecom/index-en.html">Telecommunications</a></li></ul></li>
<li><a href="../../../tab-install/index-en.html">Installation<span class="subheader">&#160;</span></a></li>
<li><a href="../../../tab-licence/index-en.html">License<span class="subheader">&#160;</span></a></li>
          </ul>
        </nav>
        
        <div class="clearfix"></div>
        
      </div>
    </header>    <div id="main">
    <div id="content">
    <div id="masthead">
          <h1 class="head">filter_fft</h1><span class="subhead"></span>
          <ul class="breadcrumbs"><li><a href="../../../index-func/index-en.html">Documentation</a></li><li> / <a href="../../../index-func/fourier/index-en.html">Fourier transform</a></li><li> / filter_fft</li></ul>
        </div>
<div id="page-content-full"><p>Creation of frequency domain filter (OLA / OverLap-and-Add technique). </p><p>Namespace:<code>dsp::fourier</code><br/></p><h2><a name="3"></a>Prototype</h2><p><pre class="prototype">tuple&lt;sptr&lt;Filter&lt;cfloat, cfloat, FiltreFFTConfig&gt;&gt;, int&gt; <b>filter_fft</b>(const FFTFilterConfig &config)</pre></p><h2><a name="4"></a>Parameters</h2><p><table class="formtable2"><tr><td>config</td><td>Configuration structure (<a href="../../../index-func/fourier/FFTFilterConfig/index-en.html">FFTFilterConfig</a>) which specify:<ul><li>Dimension \(N_e\) of input time-domain blocks,</li><li>Minimal number of zeros to be inserted at the beginnning of each block,</li><li>User callback for frequency domain processing.</li></ul></td></tr></table></p><h2><a name="5"></a>Returns</h2><p>A tuple with two elements:<ul><li>the OLA filter,</li><li>an integer which is the dimension \(N\) of the FFT (that is, the dimension of the vectors that will be given to the callback).</li></ul></p><h2><a name="6"></a>Description</h2><p>For different purposes, it can be convenient to apply filtering in the frequency domain rather than in the time domain, for instante to reduce the computing load. (time domain convolutions become simple term by term product in the frequency domain). By frequency domain filtering, we mean here to be able to adjust term by term the different bins of the DFT of a signal, and then to build the result in the time domain.</p><p>So as to work in the frequency domain, samples are grouped into blocks of \(N_e\) samples, and for each of these blocks the following operations are performed:</p><ul><li><b>Windowing and overlap</b> (optional): so as to smooth processings from one block to the next one, an apodisation window is applied (by default, a Hann window with an overlap of 50 %, so as to enable perfect reconstruction of the time domain signal).</li><li><b>Zero-padding</b> : So as to compute efficiently the FFT, zeros are inserted, making the length of each block equal to some power of 2. So, after zero-padding, the blocks length is \(N=2^k\geq N_e\).</li><li><b>Fourier transform:</b> through a FFT.</li><li><b>Frequency domain processing</b> : through a callback provided by the caller (see below).</li><li><b>Inverse Fourier transform</b>.</li><li><b>Recomposition of time domain blocks</b>: through the OLA technique (<i>OverLap-and-Add</i>).</li></ul><p><parblock><p><dl class="section note"><dd><b>Note<br/></b></dd><dd>For the more specific problem of efficient FIR filter computing (using the FFT), use rather filter_fir_fft(), which is based on this function, and is simpler to use. </dd></dl><br/></p></parblock></p><p><h2>Example: Low-pass filter</h2><p en="Example: Low-pass filter"><description lang="en">In this example, we low-pass filter a signal by simply zeroing half the spectrum. <p><pre><code class="C++"><highlight class="normal">  soit n = 8192;</highlight>
<highlight class="normal">  </highlight><highlight class="comment">// signal utile à f = 0.04 * fe Hz, et parasite à f=0.400 * fe Hz</highlight><highlight class="normal"></highlight>
<highlight class="normal">  soit x = (<a href="../../../index-func/tsd/tsd-gen/sigsin/index-en.html">sigsin</a>(0.004, n) + <a href="../../../index-func/tsd/tsd-gen/sigsin/index-en.html">sigsin</a>(0.4, n)).as&lt;cfloat&gt;();</highlight>
<highlight class="normal"></highlight>
<highlight class="normal"></highlight>
<highlight class="normal">  FiltreFFTConfig config;</highlight>
<highlight class="normal">  </highlight><highlight class="comment">// Cette callback sera appelée à chaque itération de l'OLA</highlight><highlight class="normal"></highlight>
<highlight class="normal">  config.traitement_freq = [&](Veccf &X)</highlight>
<highlight class="normal">  {</highlight>
<highlight class="normal">    assertion(X.rows() == 512);</highlight>
<highlight class="normal">    X.segment(128, 256).setZero();</highlight>
<highlight class="normal">  };</highlight>
<highlight class="normal">  config.dim_blocs_temporel   = 512;  </highlight><highlight class="comment">// Par bloc de 512 échantillons</highlight><highlight class="normal"></highlight>
<highlight class="normal">  config.nb_zeros_min         = 0;    </highlight><highlight class="comment">// Zéro-padding non nécessaire</highlight><highlight class="normal"></highlight>
<highlight class="normal">  config.avec_fenetrage       = oui;  </highlight><highlight class="comment">// Fenêtre de Hann et recouvrement de 50 %</highlight><highlight class="normal"></highlight>
<highlight class="normal"></highlight>
<highlight class="normal">  soit [ola, N] = filtre_fft(config);</highlight>
<highlight class="normal">  soit y = real(ola-&gt;step(x));</highlight>
</code></pre></p><img src="ex-ola-pb.png" style="height: 100%; width: 100%; object-fit: contain"></img></description></p></p><h2><a name="7"></a>See also</h2><p>filter_fir_fft(), filter_rfft(), <a href="../../../index-func/fourier/ola_complexity/index-en.html">ola_complexity()</a>, <a href="../../../index-func/fourier/ola_complexity_optimize/index-en.html">ola_complexity_optimize()</a></p></div></div><div class="clearfix"></div>
        <div class="shadow-main"></div></div><footer><div class="wrapper">
<center><p></p></center></div></footer><script>initialize();</script></body></html>