<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libtsd: dsp::telecom::packet_receiver_new</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libtsd
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">C++ signal processing library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="pageinstall.html"><span>Installation</span></a></li>
      <li><a href="pagelicence.html"><span>Licence</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__telecom-mods_ga03bb0e3785a255adef585a268e5900e4.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="contents">
<a id="ga03bb0e3785a255adef585a268e5900e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga03bb0e3785a255adef585a268e5900e4">&#9670;&nbsp;</a></span>packet_receiver_new()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__tsd.html#ga2bdb8287f8213bd4bcdd6a47a4886586">sptr</a>&lt;<a class="el" href="structdsp_1_1telecom_1_1_packet_receiver.html">PacketReceiver</a>&gt; dsp::telecom::packet_receiver_new </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdsp_1_1telecom_1_1_packet_receiver_config.html">PacketReceiverConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>rc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<h3>Création d'un récepteur de trames</h3>
<p>Un récepteur est constitué de trois sous-blocs suivant :</p><ol type="1">
<li>Une détecteur d'en-tête de synchronisation.</li>
<li>Un interpolateur, permettant de passer au rythme symbole et dont le retard est réglé d'après celui mesuré par le détecteur.</li>
<li>Un démodulateur fonctionnant à la fréquence symbole (pas de de correction d'horloge), dont la boucle de correction de phase (ainsi que la CAG) est initialisée en fonction des paramètres RF détectés sur le motif de synchronisation.</li>
</ol>
<h4>Description détaillée du fonctionnement</h4>
<p>L'implémentation (src/telecom/recepteur.cc) réalise les opérations suivantes :</p><ol type="1">
<li>Les données reçues sont d'abord découpées en bloc de \(N_e\) échantillons (méthode "step()" appelée depuis l'extérieur), traités ensuite par la méthode "step_Ne()".</li>
<li>Le détecteur de motif (voir détecteur_création()) est appelé sur chaque bloc</li>
<li>Pour chaque motif de synchronisation trouvé par le détecteur, les échantillons I/Q correspondant au début des données utiles sont extraits, puis dans la méthode step_demod() :<ol type="a">
<li>Appel de l'interpolateur (correction d'horloge)</li>
<li>Appel du filtre adapté</li>
<li>Décimation au rythme symbole</li>
<li>Calage du premier échantillon sur le milieu du premier symbole</li>
<li>Appel du démodulateur (voir démodulateur_création())</li>
</ol>
</li>
</ol>
<dl class="section note"><dt>Note</dt><dd>Dans une future version, les étapes 3a, 3b et 3c seront fusionnées en un seul filtre d'interpolation polyphase, basé sur le filtre de mise en forme.</dd></dl>
<dl class="section user"><dt>Exemple</dt><dd><div class="fragment"><div class="line">  <span class="comment">// Configuration de l&#39;émetteur</span></div>
<div class="line"><span class="comment"></span>  ÉmetteurConfig ec;</div>
<div class="line">  <span class="comment">// En-tête de synchonisation (13 bits)</span></div>
<div class="line">  ec.format.entete = <a class="code" href="group__telecom-codes-synchro_ga622aa43bdcc069ad41762f50b83d3176.html#ga622aa43bdcc069ad41762f50b83d3176">code_Barker</a>(13);</div>
<div class="line">  <span class="comment">// Nombre de bits utiles</span></div>
<div class="line">  ec.format.nbits  = 16;</div>
<div class="line">  <span class="comment">// Facteur de sur-échantillonnage = 8</span></div>
<div class="line">  ec.format.modulation.fsymb  = 1;</div>
<div class="line">  ec.format.modulation.fe     = 8;</div>
<div class="line">  <span class="comment">// BPSK, avec filtre SRRC (60 % de dépassement)</span></div>
<div class="line">  ec.format.modulation.forme_onde = forme_onde_bpsk(SpecFiltreMiseEnForme::rcs(0.6));</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Instanciation de l&#39;émetteur</span></div>
<div class="line">  <span class="keyword">auto</span> tx = émetteur_création(ec);</div>
<div class="line"> </div>
<div class="line">  RécepteurConfig rc;</div>
<div class="line">  rc.format = ec.format;</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">auto</span> rx = récepteur_création(rc);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// 16 bits alternés (101010...)</span></div>
<div class="line">  <span class="keyword">auto</span> data = BitStream::altern(16);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Emission d&#39;une trame</span></div>
<div class="line">  ArrayXcf iq = tx-&gt;step(data);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Note : flush du signal (car le récepteur réagit avec du retard)</span></div>
<div class="line">  <span class="keyword">auto</span> trames = rx-&gt;step(iq | ArrayXcf::Zero(2000));</div>
<div class="line"> </div>
<div class="line">  Figures f;</div>
<div class="line">  f.subplot(141).plot(ec.format.entete.array(), <span class="stringliteral">&quot;|bo&quot;</span>, <span class="stringliteral">&quot;En-tête de synchronisation&quot;</span>);</div>
<div class="line">  f.subplot(142).plot(data.array(), <span class="stringliteral">&quot;|go&quot;</span>, <span class="stringliteral">&quot;Données envoyées&quot;</span>);</div>
<div class="line">  f.subplot(143).plot(iq, <span class="stringliteral">&quot;-m&quot;</span>);</div>
<div class="line">  f.gcf().titre(<span class="stringliteral">&quot;Trame modulée (en-tête + données)&quot;</span>);</div>
<div class="line">  <span class="keywordflow">if</span>(trames.size() &gt; 0)</div>
<div class="line">    f.subplot(144).plot(trames[0].bs.array(), <span class="stringliteral">&quot;|go&quot;</span>, <span class="stringliteral">&quot;Données décodées&quot;</span>);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="ttc" id="agroup__telecom-codes-synchro_ga622aa43bdcc069ad41762f50b83d3176_html_ga622aa43bdcc069ad41762f50b83d3176"><div class="ttname"><a href="group__telecom-codes-synchro_ga622aa43bdcc069ad41762f50b83d3176.html#ga622aa43bdcc069ad41762f50b83d3176">dsp::telecom::code_Barker</a></div><div class="ttdeci">BitStream code_Barker(int n)</div><div class="ttdoc">Génération d'un code de Barker.</div><div class="ttdef"><b>Definition:</b> telecom.hpp:2422</div></div>
</div><!-- fragment --><div class="image">
<img src="ex-recepteur.png" alt="" width="1000px"/>
</div>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd>émetteur_création(), détecteur_création() </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacedsp.html">dsp</a></li><li class="navelem"><a class="el" href="namespacedsp_1_1telecom.html">telecom</a></li>
    <li class="footer">Generated on Tue Mar 15 2022 07:48:06 for libtsd by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
